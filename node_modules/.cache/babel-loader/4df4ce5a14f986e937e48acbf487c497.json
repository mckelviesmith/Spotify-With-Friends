{"ast":null,"code":"var _jsxFileName = \"/Users/mckelvie/Desktop/spotify-w-friends/cs4550-project-main 2/src/components/NavBar/secureMenu.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from 'react';\nimport { Link, useNavigate } from 'react-router-dom';\nimport { useProfile } from '../../contexts/profileContext';\nimport refreshPage from '../../utils/refreshPage';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nconst SecureMenu = () => {\n  _s();\n\n  const [currentUser, setCurrentUser] = useState();\n  const [waiting, setWaiting] = useState(true);\n  const {\n    checkLoggedIn,\n    logout\n  } = useProfile();\n  const navigate = useNavigate();\n  useEffect(() => {\n    const check = async () => {\n      try {\n        const user = await checkLoggedIn();\n        setCurrentUser(user);\n        setWaiting(false);\n      } catch (e) {\n        setWaiting(false);\n      }\n    };\n\n    check();\n  }, []);\n\n  const handleLogout = async () => {\n    try {\n      await logout();\n      navigate('/login');\n      refreshPage();\n    } catch (e) {\n      alert('Unable to logout');\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"button\", {\n      className: \"nav-link active btn btn-info p-1 px-2 mt-lg-0 mt-2\",\n      id: \"navbarDropdown\",\n      \"data-toggle\": \"dropdown\",\n      \"aria-haspopup\": \"true\",\n      \"aria-expanded\": \"false\",\n      children: /*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"text-white-50\",\n        children: currentUser && currentUser.username || !currentUser && 'Join us'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 38,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 37,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n      className: \"dropdown-menu dropdown-menu-end\",\n      style: {\n        minWidth: '1rem'\n      },\n      \"aria-labelledby\": \"navbarDropdown\",\n      children: currentUser && /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(Link, {\n          to: `/profile/${currentUser.username}`,\n          className: \"dropdown-item\",\n          children: \"Profile\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 49,\n          columnNumber: 29\n        }, this), /*#__PURE__*/_jsxDEV(\"hr\", {\n          className: \"dropdown-divider\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 52,\n          columnNumber: 29\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"dropdown-item\",\n          onClick: handleLogout,\n          type: \"button\",\n          children: \"Logout\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 53,\n          columnNumber: 29\n        }, this)]\n      }, void 0, true) || waiting && /*#__PURE__*/_jsxDEV(_Fragment, {}, void 0, false) || !currentUser && !waiting && /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(Link, {\n          to: \"/register\",\n          className: \"dropdown-item\",\n          children: \"Register\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 63,\n          columnNumber: 29\n        }, this), /*#__PURE__*/_jsxDEV(Link, {\n          to: \"/login\",\n          className: \"dropdown-item\",\n          children: \"Login\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 66,\n          columnNumber: 29\n        }, this)]\n      }, void 0, true)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 43,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true);\n};\n\n_s(SecureMenu, \"uER3mObA4S2MeaQLsOEy7yAaCeY=\", false, function () {\n  return [useProfile, useNavigate];\n});\n\n_c = SecureMenu;\nexport default SecureMenu;\n\nvar _c;\n\n$RefreshReg$(_c, \"SecureMenu\");","map":{"version":3,"sources":["/Users/mckelvie/Desktop/spotify-w-friends/cs4550-project-main 2/src/components/NavBar/secureMenu.js"],"names":["React","useEffect","useState","Link","useNavigate","useProfile","refreshPage","SecureMenu","currentUser","setCurrentUser","waiting","setWaiting","checkLoggedIn","logout","navigate","check","user","e","handleLogout","alert","username","minWidth"],"mappings":";;;AAAA,OAAOA,KAAP,IAAeC,SAAf,EAA0BC,QAA1B,QAAyC,OAAzC;AACA,SAASC,IAAT,EAAeC,WAAf,QAAkC,kBAAlC;AACA,SAASC,UAAT,QAA2B,+BAA3B;AACA,OAAOC,WAAP,MAAwB,yBAAxB;;;;AAEA,MAAMC,UAAU,GAAG,MAAM;AAAA;;AACrB,QAAM,CAACC,WAAD,EAAcC,cAAd,IAAgCP,QAAQ,EAA9C;AACA,QAAM,CAACQ,OAAD,EAAUC,UAAV,IAAwBT,QAAQ,CAAC,IAAD,CAAtC;AACA,QAAM;AAAEU,IAAAA,aAAF;AAAiBC,IAAAA;AAAjB,MAA4BR,UAAU,EAA5C;AACA,QAAMS,QAAQ,GAAGV,WAAW,EAA5B;AAEAH,EAAAA,SAAS,CAAC,MAAM;AACZ,UAAMc,KAAK,GAAG,YAAY;AACtB,UAAI;AACA,cAAMC,IAAI,GAAG,MAAMJ,aAAa,EAAhC;AACAH,QAAAA,cAAc,CAACO,IAAD,CAAd;AACAL,QAAAA,UAAU,CAAC,KAAD,CAAV;AACH,OAJD,CAIE,OAAOM,CAAP,EAAU;AACRN,QAAAA,UAAU,CAAC,KAAD,CAAV;AACH;AACJ,KARD;;AASAI,IAAAA,KAAK;AACR,GAXQ,EAWN,EAXM,CAAT;;AAaA,QAAMG,YAAY,GAAG,YAAY;AAC7B,QAAI;AACA,YAAML,MAAM,EAAZ;AACAC,MAAAA,QAAQ,CAAC,QAAD,CAAR;AACAR,MAAAA,WAAW;AACd,KAJD,CAIE,OAAOW,CAAP,EAAU;AACRE,MAAAA,KAAK,CAAC,kBAAD,CAAL;AACH;AACJ,GARD;;AAUA,sBACI;AAAA,4BACI;AAAQ,MAAA,SAAS,EAAC,oDAAlB;AAAuE,MAAA,EAAE,EAAC,gBAA1E;AAA2F,qBAAY,UAAvG;AAAkH,uBAAc,MAAhI;AAAuI,uBAAc,OAArJ;AAAA,6BACI;AAAM,QAAA,SAAS,EAAC,eAAhB;AAAA,kBACMX,WAAW,IAAIA,WAAW,CAACY,QAA5B,IACC,CAACZ,WAAD,IAAgB;AAFtB;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA,YADJ,eAOI;AAAI,MAAA,SAAS,EAAC,iCAAd;AACI,MAAA,KAAK,EAAE;AAACa,QAAAA,QAAQ,EAAE;AAAX,OADX;AAEI,yBAAgB,gBAFpB;AAAA,gBAISb,WAAW,iBACR;AAAA,gCACI,QAAC,IAAD;AAAM,UAAA,EAAE,EAAG,YAAWA,WAAW,CAACY,QAAS,EAA3C;AAA8C,UAAA,SAAS,EAAC,eAAxD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBADJ,eAII;AAAI,UAAA,SAAS,EAAC;AAAd;AAAA;AAAA;AAAA;AAAA,gBAJJ,eAKI;AAAK,UAAA,SAAS,EAAC,eAAf;AACI,UAAA,OAAO,EAAEF,YADb;AAEI,UAAA,IAAI,EAAC,QAFT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBALJ;AAAA,sBADJ,IAaCR,OAAO,iBAAI,qCAbZ,IAcC,CAACF,WAAD,IAAgB,CAACE,OAAjB,iBACG;AAAA,gCACI,QAAC,IAAD;AAAM,UAAA,EAAE,EAAC,WAAT;AAAqB,UAAA,SAAS,EAAC,eAA/B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBADJ,eAII,QAAC,IAAD;AAAM,UAAA,EAAE,EAAC,QAAT;AAAkB,UAAA,SAAS,EAAC,eAA5B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBAJJ;AAAA;AAnBZ;AAAA;AAAA;AAAA;AAAA,YAPJ;AAAA,kBADJ;AAwCH,CArED;;GAAMH,U;UAGgCF,U,EACjBD,W;;;KAJfG,U;AAuEN,eAAeA,UAAf","sourcesContent":["import React, {useEffect, useState} from 'react';\nimport { Link, useNavigate } from 'react-router-dom';\nimport { useProfile } from '../../contexts/profileContext';\nimport refreshPage from '../../utils/refreshPage';\n\nconst SecureMenu = () => {\n    const [currentUser, setCurrentUser] = useState();\n    const [waiting, setWaiting] = useState(true);\n    const { checkLoggedIn, logout } = useProfile();\n    const navigate = useNavigate();\n    \n    useEffect(() => {\n        const check = async () => {\n            try {\n                const user = await checkLoggedIn();\n                setCurrentUser(user);\n                setWaiting(false);\n            } catch (e) {\n                setWaiting(false);\n            }\n        }\n        check();\n    }, []);\n\n    const handleLogout = async () => {\n        try {\n            await logout();\n            navigate('/login');\n            refreshPage();\n        } catch (e) {\n            alert('Unable to logout');\n        }\n    };\n\n    return (\n        <>\n            <button className='nav-link active btn btn-info p-1 px-2 mt-lg-0 mt-2' id='navbarDropdown' data-toggle='dropdown' aria-haspopup='true' aria-expanded='false'>\n                <span className='text-white-50'>\n                    {(currentUser && currentUser.username) ||\n                     (!currentUser && 'Join us')}\n                </span>\n            </button>\n            <ul className='dropdown-menu dropdown-menu-end'\n                style={{minWidth: '1rem'}} \n                aria-labelledby='navbarDropdown'>\n                {\n                    (currentUser &&\n                        <>\n                            <Link to={`/profile/${currentUser.username}`} className='dropdown-item'>\n                                Profile\n                            </Link>\n                            <hr className=\"dropdown-divider\"></hr>\n                            <div className='dropdown-item' \n                                onClick={handleLogout}\n                                type='button'>\n                                Logout\n                            </div>\n                        </>\n                    ) ||\n                    (waiting && <></>) ||\n                    (!currentUser && !waiting &&\n                        <>\n                            <Link to='/register' className='dropdown-item'>\n                                Register\n                            </Link>\n                            <Link to='/login' className='dropdown-item'>\n                                Login\n                            </Link>\n                        </>\n                    )\n                }\n            </ul>\n        </>\n    );\n};\n\nexport default SecureMenu;"]},"metadata":{},"sourceType":"module"}