{"ast":null,"code":"var _jsxFileName = \"/Users/mckelvie/Desktop/spotify-w-friends/cs4550-project-main 2/src/components/Profile/profileMain.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from \"react\";\nimport UserList from \"../user-list\";\nimport PostList from \"../Posts\";\nimport SongList from \"../SongList\";\nimport CreatePost from \"../Posts/createPost\";\nimport * as userService from '../../services/user-service';\nimport * as songService from '../../services/song-service';\nimport * as postService from '../../services/post-service';\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst ProfileMain = _ref => {\n  _s();\n\n  let {\n    isThisUser = false,\n    profileUser = {\n      name: \"\",\n      username: \"\",\n      password: \"\",\n      creator: false,\n      biography: \"\",\n      image: \"\",\n      songs: [],\n      playlists: [],\n      followers: [],\n      following: []\n    }\n  } = _ref;\n  const [followers, setFollowers] = useState([]);\n  const [following, setFollowing] = useState([]);\n  const [usersSongs, setUsersSongs] = useState([]);\n  const dispatch = useDispatch();\n  const posts = useSelector(state => state.posts);\n\n  const findUserPosts = async () => {\n    const posts = await postService.findPostsByAuthor(profileUser._id);\n    dispatch({\n      type: 'FIND_POSTS_BY_AUTHOR',\n      posts: posts\n    });\n  };\n\n  useEffect(findUserPosts, [dispatch]); // Get profile user's followers, following, and song data objects\n\n  useEffect(() => {\n    if (profileUser) {\n      const findUsersFollowers = async () => {\n        const followers = await userService.findUsersFollowers(profileUser);\n        setFollowers(followers);\n      };\n\n      const findUsersFollowing = async () => {\n        const following = await userService.findUsersFollowing(profileUser);\n        setFollowing(following);\n      };\n\n      const findUsersSongs = async () => {\n        if (usersSongs.length === 0 && profileUser.songs.length > 0) {\n          const songs = await songService.findSongsById(profileUser.songs);\n          setUsersSongs(songs);\n        }\n      };\n\n      const getUsersObjects = async () => {\n        await Promise.all([findUsersFollowers(), findUsersFollowing(), findUsersSongs()]);\n      };\n\n      getUsersObjects();\n    }\n  }, [dispatch]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"row\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"col-4 col-lg-3 d-none d-md-block\",\n      children: [/*#__PURE__*/_jsxDEV(\"h5\", {\n        className: \"p-0\",\n        children: \"Followers\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 17\n      }, this), followers.length > 0 && /*#__PURE__*/_jsxDEV(UserList, {\n        users: followers,\n        className: \"\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 43\n      }, this) || /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [isThisUser && 'You have ' || `${profileUser.username} has `, \"no followers\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 25\n      }, this), /*#__PURE__*/_jsxDEV(\"h5\", {\n        className: \"p-0 mt-3\",\n        children: \"Following\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 17\n      }, this), following.length > 0 && /*#__PURE__*/_jsxDEV(UserList, {\n        users: following,\n        className: \"\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 43\n      }, this) || isThisUser && /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"Add people to follow!\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 36\n      }, this) || /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [profileUser.username, \" is not following anyone\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"col-12 col-md-8 col-lg-6 px-3 px-xl-5\",\n      children: [isThisUser && /*#__PURE__*/_jsxDEV(CreatePost, {\n        canPost: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 32\n      }, this), posts.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mx-3 mx-xl-5\",\n        children: [/*#__PURE__*/_jsxDEV(\"h5\", {\n          className: \"text-center\",\n          children: [isThisUser && 'Your' || `${profileUser.name}'s`, \" posts\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 95,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(PostList, {\n          posts: posts\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 98,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 21\n      }, this) || /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [isThisUser && 'You have ' || `${profileUser.username} has `, \"no posts to display\", isThisUser && '. Create one now and share your songs with everyone!']\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"col-3 d-none d-lg-block\",\n      children: [/*#__PURE__*/_jsxDEV(\"h5\", {\n        className: \"p-0\",\n        children: [!isThisUser && `${profileUser.name}'s ` || profileUser.creator && 'Your ' || 'Saved ', \"Songs\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 115,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(SongList, {\n        songs: usersSongs\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 124,\n        columnNumber: 21\n      }, this) || /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [isThisUser && 'You have ' || `${profileUser.username} has `, \"no \", !profileUser.creator && 'saved', \" songs\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 125,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 71,\n    columnNumber: 9\n  }, this);\n};\n\n_s(ProfileMain, \"2Fx3xY38thHwqWrhCfAP35mgjR0=\", false, function () {\n  return [useDispatch, useSelector];\n});\n\n_c = ProfileMain;\nexport default ProfileMain;\n\nvar _c;\n\n$RefreshReg$(_c, \"ProfileMain\");","map":{"version":3,"sources":["/Users/mckelvie/Desktop/spotify-w-friends/cs4550-project-main 2/src/components/Profile/profileMain.js"],"names":["React","useEffect","useState","UserList","PostList","SongList","CreatePost","userService","songService","postService","useDispatch","useSelector","ProfileMain","isThisUser","profileUser","name","username","password","creator","biography","image","songs","playlists","followers","following","setFollowers","setFollowing","usersSongs","setUsersSongs","dispatch","posts","state","findUserPosts","findPostsByAuthor","_id","type","findUsersFollowers","findUsersFollowing","findUsersSongs","length","findSongsById","getUsersObjects","Promise","all"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport UserList from \"../user-list\";\nimport PostList from \"../Posts\";\nimport SongList from \"../SongList\";\nimport CreatePost from \"../Posts/createPost\";\nimport * as userService from '../../services/user-service';\nimport * as songService from '../../services/song-service';\nimport * as postService from '../../services/post-service';\nimport {useDispatch, useSelector} from \"react-redux\";\n\nconst ProfileMain = ({\n    isThisUser = false,\n    profileUser = {\n        name: \"\",\n        username: \"\",\n        password: \"\",\n        creator: false,\n        biography: \"\",\n        image: \"\",\n        songs: [],\n        playlists: [],\n        followers: [],\n        following: [],\n    }\n}) => {\n    const [followers, setFollowers] = useState([]);\n    const [following, setFollowing] = useState([]);\n    const [usersSongs, setUsersSongs] = useState([]);\n\n    const dispatch = useDispatch();\n    const posts = useSelector(state => state.posts);\n    const findUserPosts = async () => {\n        const posts = await postService.findPostsByAuthor(profileUser._id);\n        dispatch({\n            type: 'FIND_POSTS_BY_AUTHOR',\n            posts: posts\n        });\n    }\n    useEffect(findUserPosts, [dispatch]);\n\n    // Get profile user's followers, following, and song data objects\n    useEffect(() => {\n        if (profileUser) {\n            const findUsersFollowers = async () => {\n                const followers = await userService.findUsersFollowers(profileUser);\n                setFollowers(followers);\n            };\n            const findUsersFollowing = async () => {\n                const following = await userService.findUsersFollowing(profileUser);\n                setFollowing(following);\n            };\n            const findUsersSongs = async () => {\n                if (usersSongs.length === 0 && profileUser.songs.length > 0) {\n                    const songs = await songService.findSongsById(profileUser.songs);\n                    setUsersSongs(songs);\n                }\n            };\n\n            const getUsersObjects = async () => {\n                await Promise.all([\n                    findUsersFollowers(),\n                    findUsersFollowing(),\n                    findUsersSongs(),\n                ]);\n            };\n            getUsersObjects();\n        }\n    }, [dispatch]);\n\n    return (\n        <div className='row'>\n            {/* Left column */}\n            <div className='col-4 col-lg-3 d-none d-md-block'>\n                <h5 className='p-0'>Followers</h5>\n                {(followers.length > 0 && <UserList users={followers} className='' />) ||\n                        <p>\n                            {\n                                (isThisUser && 'You have ') ||\n                                `${profileUser.username} has `\n                            }\n                            no followers\n                        </p>\n                }\n                <h5 className='p-0 mt-3'>Following</h5>\n                {(following.length > 0 && <UserList users={following} className='' />) ||\n                    (isThisUser && <p>Add people to follow!</p>) ||\n                    <p>{profileUser.username} is not following anyone</p>}\n            </div>\n\n            {/* Middle column */}\n            <div className='col-12 col-md-8 col-lg-6 px-3 px-xl-5'>\n                {isThisUser && <CreatePost canPost={true}/>}\n                {(posts.length > 0 &&\n                    <div className=\"mx-3 mx-xl-5\">\n                        <h5 className=\"text-center\">\n                            {(isThisUser && 'Your') || `${profileUser.name}'s`} posts\n                        </h5>\n                        <PostList posts={posts} />\n                    </div>) ||\n                    <p>\n                        {\n                            (isThisUser && 'You have ') ||\n                            `${profileUser.username} has `\n                        }\n                        no posts to display\n                        {\n                            isThisUser && '. Create one now and share your songs with everyone!'\n                        }\n                    </p>\n                }\n            </div>\n\n            {/* Right column */}\n            <div className='col-3 d-none d-lg-block'>\n                <h5 className='p-0'>\n                    {\n                        (!isThisUser && `${profileUser.name}'s `) ||\n                        (profileUser.creator && 'Your ') || \n                        'Saved '\n                    }\n                    Songs\n                </h5>\n                {\n                    <SongList songs={usersSongs} /> ||\n                    <p>\n                        {\n                            (isThisUser && 'You have ') ||\n                            `${profileUser.username} has `\n                        }\n                        no {!profileUser.creator && 'saved'} songs\n                    </p>\n                }\n            </div>\n        </div>\n    );\n};\n\nexport default ProfileMain;"]},"metadata":{},"sourceType":"module"}